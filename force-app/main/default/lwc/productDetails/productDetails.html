<template>
    
    <template for:each={product.data} for:item="prod">
        
        <div key={prod.Id} >
            <div class="spinner">
                <template if:true={isLoading}>
                     <lightning-spinner alternative-text="Loading" variant="brand" size="large">
                     </lightning-spinner>
                </template>
            </div>
            <main class="container">
                <div class="left-column">
                    <div class="slds-grid">
                        <div class="slds-col" >
                            <div class="slds-align_absolute-center">
                                <a class="prev" onclick={backSlide}>&#10094;</a>
                            </div>
                        </div>
                        <div class="slds-col">
                            <div class="slds-align_absolute-center">
                                <template if:true={imagesUrl}>
                                    <ul class="listing">
                                        <li class="product">

                                            <img style="margin-top: 20%" src={currentPhoto} />

                                        </li>
                                    </ul>
                                </template>
                            </div>
                        </div>
                        <div class="slds-col">
                            <div class="slds-align_absolute-center">
                                <a class="next" onclick={nextSlide} >&#10095;</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="right-column">

                    <!-- Product Description -->
                    <div class="product-description">
                        
                        <span>{prod.Family}</span>
                        <h1>{prod.Product_Brand__c} {prod.Product_Model__c}</h1>
                        <table style="width:100%">
                            <tr>
                              <td class="td-title"><h3>Name: </h3></td>
                              <td><h3>{prod.Name}</h3></td>
                            </tr>
                            <tr>
                              <td class="td-title"><h3>Brand: </h3></td>
                              <td><h3>{prod.Product_Brand__c}</h3></td>
                            </tr>
                            <tr>
                                <td class="td-title"><h3>Model: </h3></td>
                              <td><h3>{prod.Product_Model__c}</h3></td>
                            </tr>
                          </table>
                          
                        
                    </div>

                    <!-- Product Configuration -->
                    <div class="product-configuration">
                        <div >Qty(max 10): <input class="quantity" type="number" min="1" max="10" value={quantity} onchange={handleQuantity}></div>
                        <c-five-star-rating value={ratingValue} read-only="true"></c-five-star-rating>
                        <div if:true={isLower}><span style="font-size: 19px; color: rgb(10, 8, 8)"><del>€{oldPrice}</del></span></div>
                    </div>

                    <!-- Product Pricing -->
                    <div class="product-price">
                        
                        <span style="font-size: 35px; color: rgb(170, 16, 16); font-weight: bold">€{price}</span>
                        <a data-item={prod.Id} onclick={handleProdClick} class="cart-btn">Add to cart</a>
                        <br>
                        
                    </div>
                </div>
            </main>

        </div>


    </template>
    <template for:each={product.data} for:item="prod">
        <div key={prod.id}>
        <lightning-tabset>
            <lightning-tab label="Opinions" value="2">
                <div>
                    <c-product-reviews product-id={prod.Id}></c-product-reviews>
                </div>
            </lightning-tab>
            <lightning-tab label="Description">
                <div class="specification-container">
                    <div class="product-images">
                        <img style="margin-left: 10%; max-width: 70%; max-height: 90%" src={detailsPhoto} />
                    </div>
                    <div class="product-descriptions" style="font-size: 17px">
                        {prod.Description}
                    </div>
                </div>
                
            </lightning-tab>
           
            <lightning-tab label="Add Opinion" title="2nd tab extended title">
                <template if:true={renderAddComment}>
                    <div class="slds-m-vertical_medium">
                        <c-five-star-rating onratingchange={handleRatingChanged}></c-five-star-rating>
                    </div>
                    <div class="row" style="max-height: 150px">
                        <textarea  class="text-area" label="Add comment" placeholder="Type here..." onchange={handleCommentContent}></textarea>
                    </div> 
                    <div class="row" style="margin-top: 20px"> 
                        <a class="cart-btn" onclick={handleAddComment}>Add comment</a>
                    </div>
                </template>
                <template if:false={renderAddComment}>
                    <div class="slds-align_absolute-center slds-scrollable_y">You already reviewed this product</div>
                </template>
            </lightning-tab>
        </lightning-tabset>
        </div>
    </template>
</template>